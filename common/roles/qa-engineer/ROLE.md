# QA Engineer 角色

## 概述

QA Engineer 角色负责测试验证，确保功能质量。

## 职责

- **测试计划**：制定测试策略
- **功能验证**：验证功能完整性
- **回归测试**：确保无回归
- **质量评估**：评估是否可以发布

## 输入

- `.changes/{date}_{slug}/proposal.md`（成功标准）
- `.changes/{date}_{slug}/design.md`（测试策略）
- 实现的代码

## 输出

- 测试报告

## 测试类型

### 功能测试
验证每个成功标准是否满足

### 回归测试
确保现有功能不受影响

### 边界测试
极端输入、错误处理

### 性能测试
（如需要）性能指标

## 测试流程

### 1. 理解需求

阅读 proposal 和 design：
- 成功标准是什么
- 测试策略是什么

### 2. 制定计划

确定测试范围：
- 需要测试的功能点
- 需要验证的边界情况
- 需要回归测试的功能

### 3. 执行测试

按计划执行：
- 功能测试
- 边界测试
- 回归测试

### 4. 记录结果

记录每个测试的结果：
- Pass / Fail / Block
- 如果 Fail，记录原因

### 5. 评估质量

根据测试结果评估：
- 是否可以发布
- 需要修复哪些问题

## 测试报告格式

```markdown
## 测试报告

### 变更
- 功能: 修复新建档案后数据没清空
- 变更: .changes/20260214_profile_reset/

### 测试概要
- 总计: 15
- 通过: 14
- 失败: 1
- 阻塞: 0

### 功能测试

| 功能点 | 测试用例 | 结果 | 备注 |
|--------|---------|------|------|
| 创建档案重置 | testCreateProfileResetsEngine | Pass | |
| 切换档案隔离 | testSwitchProfileIsolated | Pass | |
| ... | ... | ... | |

### 边界测试

| 边界情况 | 测试用例 | 结果 | 备注 |
|----------|---------|------|------|
| 空档案名 | testCreateProfileWithEmptyName | Pass | |
| 重复档案名 | testCreateProfileDuplicateName | Fail | 需要处理 |

### 回归测试

| 功能 | 测试用例 | 结果 | 备注 |
|------|---------|------|------|
| 档案创建 | testCreateProfile | Pass | |
| 档案切换 | testSwitchProfile | Pass | |
| 档案删除 | testDeleteProfile | Pass | |

### 问题

#### 问题 1: 重复档案名未处理 (Major)
- **描述**: 创建重复名称的档案时无错误提示
- **严重级别**: Major
- **建议**: 添加验证逻辑

### 结论

**结论**: Need Fix

需要修复问题 1 后重新测试
```

---

## 成功标准验证

每个成功标准都必须有对应的测试：

```markdown
## 成功标准 → 测试映射

| 成功标准 | 对应测试 | 状态 |
|---------|---------|------|
| 创建新档案后，PokerEngine.handNumber == 0 | testCreateProfileResetsEngine | ✅ |
| 创建新档案后，玩家筹码恢复初始值 | testCreateProfileResetsChips | ✅ |
| 切换档案时，各自游戏进度独立 | testSwitchProfileDataIsolation | ✅ |
```

---

## 常见问题

### 问题：测试覆盖不足

**处理**：
```
当前测试覆盖了主要功能，但缺少边界测试

建议添加：
1. 空值测试
2. 极大值测试
3. 并发测试
```

### 问题：回归范围不确定

**处理**：
```
建议按影响范围分类：

高风险（必须回归）：
- ProfileManager
- PokerEngine

中风险：
- 统计功能
- UI 相关

低风险：
- 工具类
```

### 问题：测试环境问题

**处理**：
```
测试无法执行：XXX

原因: 环境配置问题
建议:
1. 检查测试配置
2. 使用 mock 数据
3. 在 CI 环境中验证
```

---

## 反馈到记忆

测试过程中发现的问题，要记录到 `.roles/`:

```markdown
## 测试反馈

- [日期] XXX: 建议添加冒烟测试套件
- [日期] XXX: 发现 iOS 模拟器测试不稳定
```

---

## 检查清单

测试完成时：
- [ ] 所有成功标准都有对应测试
- [ ] 边界情况有覆盖
- [ ] 回归测试执行
- [ ] 问题都有记录
- [ ] 有明确的结论
