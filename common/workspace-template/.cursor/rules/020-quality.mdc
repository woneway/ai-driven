---
description: 质量规则。定义代码质量和测试要求。
globs: "**/*.{ts,tsx,js,jsx,py,swift,go,java}"
---

# 质量规则

## 测试要求

### 覆盖率
| 代码类型 | 最低覆盖率 |
|----------|-----------|
| 普通代码 | 80%+ |
| 核心业务逻辑 | 100% |
| 金融计算 | 100% |
| 安全关键代码 | 100% |

### TDD 流程
```
RED  → 写失败的测试
GREEN → 写最小代码通过测试
REFACTOR → 重构优化
```

## 代码规范

### 函数长度
- 最大 50 行
- 超过需要重构

### 嵌套深度
- 最大 4 层
- 超过需要重构

### 命名
- 使用有意义的命名
- 避免单字母变量（循环除外）

### 错误处理
- 必须处理错误
- 禁止裸 catch
- 使用具体异常类型

## 安全要求

- 禁止硬编码敏感信息
- 使用环境变量
- 遵循 OWASP Top 10
