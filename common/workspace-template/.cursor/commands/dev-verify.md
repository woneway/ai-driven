---
description: 完成闭环。每次任务完成后必须执行此命令，检查质量门禁并更新记忆。
---

# /dev-verify 命令 - 完成闭环

## 概述

`/dev-verify` 是 ai-driven 工作流的最后一步，必须在每个任务完成后执行。

## 为什么必须执行

1. **确保质量** - 验证所有质量门禁
2. **自动记忆** - 更新项目知识
3. **任务标记** - 标记任务为完成

## 执行步骤

### 1. 质量门禁检查

检查以下项目：

- [ ] proposal.md 存在且完整
- [ ] design.md 存在且完整
- [ ] 测试文件存在（TDD 方式）
- [ ] 测试通过
- [ ] 代码审查通过
- [ ] E2E 测试通过（关键路径）
- [ ] lint 通过

### 2. 更新记忆文件

在当前任务的 `.changes/{date}_{slug}/summary.md` 中记录：

```markdown
# 任务完成总结

## 任务名称
{任务名称}

## 完成时间
{完成时间}

## 技术方案
{使用的技术方案}

## 遇到的问题
{遇到的问题及解决方案}

## 后续注意
{可能的改进点}
```

同时更新 `.roles/knowledge.md`：

```markdown
# 项目知识

## {日期} - {任务名称}
- 技术方案：{摘要}
- 关键决策：{决策}
```

### 3. 报告完成

输出任务完成报告。

## 跳过后果

**如果未执行 `/dev-verify`，任务视为未完成。**

人类可以要求：
- "请先执行 /dev-verify 完成闭环"
- "先验证再结束"

## 整合工作流

```
1. /sdd 规范设计
2. /plan 需求分析
3. /tdd TDD 实现
4. /code-review 代码审查
5. /e2e E2E 测试
6. /dev-verify 完成闭环 ← 必须执行
```

## 检查点

- [ ] 所有质量门禁通过
- [ ] 记忆文件已更新
- [ ] 完成报告已生成