---
description: Skills/Rules/Commands/Agents 安装规范 — 确定安装范围和格式标准
alwaysApply: true
---

# Skills/Rules/Commands/Agents 安装规范

本规则规范 ai-driven 框架中资源的创建、安装和同步。

## 资源类型

| 类型 | 位置 | 说明 |
|------|------|------|
| Skills | `skills/` | AI 技能包，包含 SKILL.md |
| Rules | `rules/` | Cursor 规则，包含 .mdc 文件 |
| Commands | `commands/` | 命令定义 |
| Agents | `agents/` | Sub-Agent 定义 |

## 安装方式

安装前先问：**这个资源是给 ai-driven 自己用，还是给所有 workspace 共享？**

### 1. 安装到 ai-driven 自己用

适用于**专门管理和赋能 ai-driven 框架**的资源：

- 安装到 `/ai-driven/.cursor/`
- 仅 ai-driven 项目自身使用

### 2. 安装到 common/global_cursor/ (所有 workspace 共享)

适用于**所有 workspace 都能用**的资源：

- **通用编程规范**：TypeScript、Python、Go 编码规范
- **通用工具**：代码审查、测试、安全扫描
- **框架无关技能**：Django、Spring Boot、React 等
- **跨项目命令**：部署、运维、分析

### 决策流程

```
安装资源时：

1. 这个资源是给 ai-driven 框架自己用，还是所有 workspace 都能用？
   - ai-driven 自己用 → 安装到 /ai-driven/.cursor/
   - 所有 workspace 共享 → 安装到 common/global_cursor/

2. 安装到 common/global_cursor/ 意味着：
   - 将被提交到 ai-driven 仓库
   - 所有 workspace 都能使用
   - 需要遵循框架规范
```

## Skill 标准格式

所有 Skills 必须符合以下格式：

### 目录结构

```
skill-name/
├── SKILL.md              # 必需：主文件
├── reference.md          # 可选：详细参考（Progressive Disclosure）
└── scripts/              # 可选：辅助脚本
    └── helper.sh
```

### SKILL.md 格式

```markdown
---
name: skill-name
description: 技能描述（说明做什么 + 何时使用）
---

# Skill Name

## 触发条件
什么时候使用此 skill

## 快速开始
核心使用方法

## Examples
使用示例

详细说明见 [reference.md](reference.md)
```

### 必填字段

| 字段 | 要求 |
|------|------|
| name | 小写字母、数字、连字符，最多 64 字符 |
| description | 说明用途和触发条件，第三人称 |
| SKILL.md | 包含 Instructions 和 Examples |

### 行数限制

| 文件 | 限制 |
|------|------|
| SKILL.md | < 500 行 |
| reference.md | 可超过，作为详细补充 |

## common/global_cursor 结构

```
common/global_cursor/
├── skills/           # Skills
├── rules/            # Rules
├── commands/         # Commands
├── agents/           # Agents
└── hooks/            # Hooks
```

## 使用 npx skills CLI 安装

### 安装流程

```bash
# 1. 使用 npx skills add 安装
npx skills add <owner/repo@skill> -g -y

# 2. 移动到 common/global_cursor/skills/ (实际文件，非 symlink)
mv ~/.agents/skills/<skill-name> /path/to/ai-driven/common/global_cursor/skills/

# 3. 清理 ~/.agents/skills/ 避免重复存储
rm -rf ~/.agents/skills/

# 4. 验证：~/.cursor/skills/ 应该是 symlink 指向 common/global_cursor/skills/
ls -la ~/.cursor/skills
```

### 安装到 ai-driven 自己用

适用于**专门管理和赋能 ai-driven 框架**的资源：

```bash
# 1. 使用 npx skills add 安装
npx skills add <owner/repo@skill> -g -y

# 2. 复制到 ai-driven/.cursor/skills/
cp -r ~/.agents/skills/<skill-name> /path/to/ai-driven/.cursor/skills/
```

### 安装到 common/global_cursor (所有 workspace 共享)

适用于**所有 workspace 都能用**的资源：

```bash
# 1. 使用 npx skills add 安装
npx skills add <owner/repo@skill> -g -y

# 2. 移动到 common/global_cursor/skills/ (不是复制，是移动)
mv ~/.agents/skills/<skill-name> /path/to/ai-driven/common/global_cursor/skills/

# 3. 清理 ~/.agents/skills/
rm -rf ~/.agents/skills/
```

## 验证清单

新增资源时检查：

- [ ] 符合 Skill 标准格式（SKILL.md + 必填字段）
- [ ] 安装位置正确（ai-driven 自己用 vs 所有 workspace 共享）
- [ ] 是实际目录而非 symlink（`common/global_cursor/skills/` 下不应有 symlink）
- [ ] 无硬编码路径
- [ ] 行数符合限制
- [ ] 包含 Examples
- [ ] ~/.cursor/skills/ 是 symlink 指向 common/global_cursor/skills/

## 使用 Skill

当有相关 skill 可用时，必须使用对应 skill：

- **提交代码时** → 使用 `git-commit` skill 生成符合 Conventional Commits 规范的 commit 信息
- **创建/管理 workspace** → 使用 `ai-driven-management` skill
